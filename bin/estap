#!/usr/bin/escript
%%
%%----------------------------------------------------------------------------

main([]) -> main(["--help"]);
main(["-h"]) -> main(["--help"]);
main(["--help"]) ->
  io:fwrite("Usage: ~s filename~n", [escript:script_name()]);

main([File]) ->
  {ok, {_Module, Forms}} = estap_file:read_file(File, []),
  {ok, {Plan, Tests}} = estap_file:load_code(Forms),
  estap_test:run(Plan, Tests),
  ok.

%%----------------------------------------------------------------------------
%% vim:ft=erlang
